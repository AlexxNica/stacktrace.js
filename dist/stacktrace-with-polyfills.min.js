(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function n(){}function i(){return function(){process.nextTick(c)}}function o(){var t=0,e=new q(c),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function s(){var t=new MessageChannel;return t.port1.onmessage=c,function(){t.port2.postMessage(0)}}function a(){return function(){setTimeout(c,1)}}function c(){for(var t=0;M>t;t+=2){var e=R[t],r=R[t+1];e(r),R[t]=void 0,R[t+1]=void 0}M=0}function u(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function l(t){try{return t.then}catch(e){return Z.error=e,Z}}function h(t,e,r,n){try{t.call(e,r,n)}catch(i){return i}}function m(t,e,r){C(function(t){var n=!1,i=h(r,e,function(r){n||(n=!0,e!==r?v(t,r):g(t,r))},function(e){n||(n=!0,b(t,e))},"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,b(t,i))},t)}function d(t,e){e._state===I?g(t,e._result):t._state===U?b(t,e._result):_(e,void 0,function(e){v(t,e)},function(e){b(t,e)})}function y(t,r){if(r.constructor===t.constructor)d(t,r);else{var n=l(r);n===Z?b(t,Z.error):void 0===n?g(t,r):e(n)?m(t,r,n):g(t,r)}}function v(e,r){e===r?b(e,f()):t(r)?y(e,r):g(e,r)}function w(t){t._onerror&&t._onerror(t._result),k(t)}function g(t,e){t._state===z&&(t._result=e,t._state=I,0===t._subscribers.length||C(k,t))}function b(t,e){t._state===z&&(t._state=U,t._result=e,C(w,t))}function _(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+I]=r,i[o+U]=n,0===o&&t._state&&C(k,t)}function k(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n,i,o=t._result,s=0;s<e.length;s+=3)n=e[s],i=e[s+r],n?A(r,n,i,o):i(o);t._subscribers.length=0}}function E(){this.error=null}function S(t,e){try{return t(e)}catch(r){return D.error=r,D}}function A(t,r,n,i){var o,s,a,c,u=e(n);if(u){if(o=S(n,i),o===D?(c=!0,s=o.error,o=null):a=!0,r===o)return void b(r,p())}else o=i,a=!0;r._state!==z||(u&&a?v(r,o):c?b(r,s):t===I?g(r,o):t===U&&b(r,o))}function O(t,e){try{e(function(e){v(t,e)},function(e){b(t,e)})}catch(r){b(t,r)}}function j(t,e,r,n){this._instanceConstructor=t,this.promise=new t(u,n),this._abortOnReject=r,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?g(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&g(this.promise,this._result))):b(this.promise,this._validationError())}function x(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function T(t){this._id=W++,this._state=void 0,this._result=void 0,this._subscribers=[],u!==t&&(e(t)||x(),this instanceof T||P(),O(this,t))}var N;N=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var F,$=N,M=(Date.now||function(){return(new Date).getTime()},Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return n.prototype=t,new n},0),C=function(t,e){R[M]=t,R[M+1]=e,M+=2,2===M&&F()},L="undefined"!=typeof window?window:{},q=L.MutationObserver||L.WebKitMutationObserver,G="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,R=new Array(1e3);F="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?i():q?o():G?s():a();var z=void 0,I=1,U=2,Z=new E,D=new E;j.prototype._validateInput=function(t){return $(t)},j.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},j.prototype._init=function(){this._result=new Array(this.length)};var X=j;j.prototype._enumerate=function(){for(var t=this.length,e=this.promise,r=this._input,n=0;e._state===z&&t>n;n++)this._eachEntry(r[n],n)},j.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;r(t)?t.constructor===n&&t._state!==z?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(n.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(I,e,t))},j.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===z&&(this._remaining--,this._abortOnReject&&t===U?b(n,r):this._result[e]=this._makeResult(t,e,r)),0===this._remaining&&g(n,this._result)},j.prototype._makeResult=function(t,e,r){return r},j.prototype._willSettleAt=function(t,e){var r=this;_(t,void 0,function(t){r._settledAt(I,e,t)},function(t){r._settledAt(U,e,t)})};var Y=function(t,e){return new X(this,t,!0,e).promise},H=function(t,e){function r(t){v(o,t)}function n(t){b(o,t)}var i=this,o=new i(u,e);if(!$(t))return b(o,new TypeError("You must pass an array to race.")),o;for(var s=t.length,a=0;o._state===z&&s>a;a++)_(i.resolve(t[a]),void 0,r,n);return o},V=function(t,e){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var n=new r(u,e);return v(n,t),n},K=function(t,e){var r=this,n=new r(u,e);return b(n,t),n},W=0,B=T;T.all=Y,T.race=H,T.resolve=V,T.reject=K,T.prototype={constructor:T,then:function(t,e){var r=this,n=r._state;if(n===I&&!t||n===U&&!e)return this;var i=new this.constructor(u),o=r._result;if(n){var s=arguments[n-1];C(function(){A(n,i,s,o)})}else _(r,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var J=function(){var t;t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var r="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var r;return new t.Promise(function(t){r=t}),e(r)}();r||(t.Promise=B)},Q={Promise:B,polyfill:J};"function"==typeof define&&define.amd?define(function(){return Q}):"undefined"!=typeof module&&module.exports?module.exports=Q:"undefined"!=typeof this&&(this.ES6Promise=Q)}).call(this),"undefined"==typeof Promise&&ES6Promise.polyfill(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i}),Array.prototype.map||(Array.prototype.map=function(t,e){if(void 0===this||null===this)throw new TypeError("this is null or not defined");var r,n=Object(this),i=n.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");arguments.length>1&&(r=e);for(var o=new Array(i),s=0;i>s;){var a,c;s in n&&(a=n[s],c=t.call(r,a,s,n),o[s]=c),s++}return o}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError("this is null or not defined");var e=Object(this),r=e.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(var n=[],i=arguments.length>=2?arguments[1]:void 0,o=0;r>o;o++)if(o in e){var s=e[o];t.call(i,s,o,e)&&n.push(s)}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var r,n;if(null===this||void 0===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=e),n=0;o>n;){var s;n in i&&(s=i[n],t.call(r,s,n,i)),n++}}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","es6-promise","stackframe"],e):"object"==typeof exports?module.exports=e(require("source-map/lib/source-map/source-map-consumer"),require("es6-promise"),require("stackframe")):t.StackTraceGPS=e(t.SourceMap,t.ES6Promise,t.StackFrame)}(this,function(t,e){"use strict";function r(){for(var t,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<e.length;n++)try{return t=e[n](),r=e[n],t}catch(i){}}function n(t,e,n){var i=r();i.open("get",t),i.onerror=n,i.onreadystatechange=function(){if(4===i.readyState){if(i.status>=200&&i.status<400)return e(i.responseText);n(new Error("Unable to retrieve "+t))}},i.send()}function i(t,e,r){for(var n,i,o,s=/function\s+([^(]*?)\s*\(([^)]*)\)/,a=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,c=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,u=t.split("\n"),f="",p=Math.min(e,20),l=0;p>l;++l)if(n=u[e-l-1],o=n.indexOf("//"),o>=0&&(n=n.substr(0,o)),n){if(f=n+f,i=a.exec(f),i&&i[1])return i[1];if(i=s.exec(f),i&&i[1])return i[1];if(i=c.exec(f),i&&i[1])return i[1]}return void 0}function o(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function s(t){if("object"!=typeof t)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof t.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof t.lineNumber||t.lineNumber%1!==0||t.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof t.columnNumber||t.columnNumber%1!==0||t.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function a(t){var e=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)$/.exec(t);if(e&&e[1])return e[1];throw new Error("sourceMappingURL not found")}function c(e,r,n,i){var o=new t.SourceMapConsumer(e).originalPositionFor({line:n,column:i});return new StackFrame(o.name,r,o.source,o.line,o.column)}e.polyfill();var u=e.Promise;return function f(t){return this instanceof f?(t=t||{},this.sourceCache=t.sourceCache||{},this._get=function(e){return new u(function(r,i){this.sourceCache[e]?r(this.sourceCache[e]):t.offline?i(new Error("Cannot make network requests in offline mode")):n(e,function(t){this.sourceCache[e]=t,r(t)}.bind(this),i)}.bind(this))},this.pinpoint=function(t){return this.getMappedLocation(t).then(this.findFunctionName.bind(this))},this.findFunctionName=function(t){return new u(function(e,r){s(t),this._get(t.fileName).then(function(r){var n=i(r,t.lineNumber,t.columnNumber);e(new StackFrame(n,t.args,t.fileName,t.lineNumber,t.columnNumber))},r)}.bind(this))},void(this.getMappedLocation=function(t){return new u(function(e,r){o(),s(t),this._get(t.fileName).then(function(n){this._get(a(n)).then(function(r){var n=t.lineNumber,i=t.columnNumber;e(c(r,t.args,n,i))},r)["catch"](r)}.bind(this),r)["catch"](r)}.bind(this))})):new f(t)}}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("stack-generator",["stackframe"],e):"object"==typeof exports?module.exports=e(require("stackframe")):t.StackGenerator=e(t.StackFrame)}(this,function(t){return{backtrace:function(e){var r=[],n=10;"object"==typeof e&&"number"==typeof e.maxStackSize&&(n=e.maxStackSize);for(var i=arguments.callee;i&&r.length<n;){var o=[].slice.call(i.arguments);r.push(/function(?:\s+([\w$]+))?\s*\(/.test(i.toString())?new t(RegExp.$1||void 0,o):new t(void 0,o));try{i=i.caller}catch(s){break}}return r}}}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],e):"object"==typeof exports?module.exports=e(require("stackframe")):t.ErrorStackParser=e(t.StackFrame)}(this,function(t){"use strict";var e=/\S+\:\d+/,r=/\s+at /;return{parse:function(t){if("undefined"!=typeof t.stacktrace||"undefined"!=typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(r))return this.parseV8OrIE(t);if(t.stack&&t.stack.match(e))return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){var e=t.split(":"),r=e.pop(),n=e[e.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var i=e.pop();return[e.join(":"),i,r]}return[e.join(":"),r,void 0]},parseV8OrIE:function(e){return e.stack.split("\n").slice(1).map(function(e){var r=e.replace(/^\s+/,"").split(/\s+/).slice(1),n=this.extractLocation(r.pop().replace(/[\(\)\s]/g,"")),i=r[0]&&"Anonymous"!==r[0]?r[0]:void 0;return new t(i,void 0,n[0],n[1],n[2])},this)},parseFFOrSafari:function(r){return r.stack.split("\n").filter(function(t){return!!t.match(e)},this).map(function(e){var r=e.split("@"),n=this.extractLocation(r.pop()),i=r.shift()||void 0;return new t(i,void 0,n[0],n[1],n[2])},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),i=[],o=2,s=n.length;s>o;o+=2){var a=r.exec(n[o]);a&&i.push(new t(void 0,void 0,a[2],a[1]))}return i},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),i=[],o=0,s=n.length;s>o;o+=2){var a=r.exec(n[o]);a&&i.push(new t(a[3]||void 0,void 0,a[2],a[1]))}return i},parseOpera11:function(r){return r.stack.split("\n").filter(function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this).map(function(e){var r,n=e.split("@"),i=this.extractLocation(n.pop()),o=n.shift()||"",s=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(r=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t(s,a,i[0],i[1],i[2])},this)}}}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],e):"object"==typeof exports?module.exports=e(require("error-stack-parser"),require("stack-generator"),require("stacktrace-gps")):t.StackTrace=e(t.ErrorStackParser,t.StackGenerator,t.StackTraceGPS)}(this,function(t,e,r){function n(t,e){var r={};return[t,e].forEach(function(t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}),r}function i(t){return t.stack||t["opera#sourceloc"]}var o={filter:function(t){return-1===(t.functionName||"").indexOf("StackTrace$$")&&-1===(t.functionName||"").indexOf("ErrorStackParser$$")&&-1===(t.functionName||"").indexOf("StackTraceGPS$$")&&-1===(t.functionName||"").indexOf("StackGenerator$$")}};return{get:function(t){try{throw new Error}catch(e){return i(e)?this.fromError(e,t):this.generateArtificially(t)}},fromError:function(e,i){return i=n(o,i),new Promise(function(n){var o=t.parse(e);"function"==typeof i.filter&&(o=o.filter(i.filter)),n(Promise.all(o.map(function(t){return new Promise(function(e){function n(r){e(t)}new r(i).pinpoint(t).then(e,n)["catch"](n)})})))}.bind(this))},generateArtificially:function(t){t=n(o,t);var r=e.backtrace(t);return"function"==typeof t.filter&&(r=r.filter(t.filter)),Promise.resolve(r)},instrument:function(t,e,r,n){if("function"!=typeof t)throw new Error("Cannot instrument non-function object");if("function"==typeof t.__stacktraceOriginalFn)return t;var o=function(){try{this.get().then(e,r)["catch"](r),t.apply(n||this,arguments)}catch(o){throw i(o)&&this.fromError(o).then(e,r)["catch"](r),o}}.bind(this);return o.__stacktraceOriginalFn=t,o},deinstrument:function(t){if("function"!=typeof t)throw new Error("Cannot de-instrument non-function object");return"function"==typeof t.__stacktraceOriginalFn?t.__stacktraceOriginalFn:t}}});
//# sourceMappingURL=stacktrace-with-polyfills.min.js.map