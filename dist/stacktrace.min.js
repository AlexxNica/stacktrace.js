(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.StackFrame=factory()}})(this,function(){"use strict";function _isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function StackFrame(functionName,args,fileName,lineNumber,columnNumber){if(functionName!==undefined){this.setFunctionName(functionName)}if(args!==undefined){this.setArgs(args)}if(fileName!==undefined){this.setFileName(fileName)}if(lineNumber!==undefined){this.setLineNumber(lineNumber)}if(columnNumber!==undefined){this.setColumnNumber(columnNumber)}}StackFrame.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(v){this.functionName=String(v)},getArgs:function(){return this.args},setArgs:function(v){if(Object.prototype.toString.call(v)!=="[object Array]"){throw new TypeError("Args must be an Array")}this.args=v},getFileName:function(){return this.fileName},setFileName:function(v){this.fileName=String(v)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(v){if(!_isNumber(v)){throw new TypeError("Line Number must be a Number")}this.lineNumber=Number(v)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(v){if(!_isNumber(v)){throw new TypeError("Column Number must be a Number")}this.columnNumber=Number(v)},toString:function(){var functionName=this.getFunctionName()||"{anonymous}";var args="("+(this.getArgs()||[]).join(",")+")";var fileName=this.getFileName()?"@"+this.getFileName():"";var lineNumber=_isNumber(this.getLineNumber())?":"+this.getLineNumber():"";var columnNumber=_isNumber(this.getColumnNumber())?":"+this.getColumnNumber():"";return functionName+args+fileName+lineNumber+columnNumber}};return StackFrame});(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["stackframe"],factory)}else if(typeof exports==="object"){module.exports=factory(require("stackframe"))}else{root.ErrorStackParser=factory(root.StackFrame)}})(this,function ErrorStackParser(StackFrame){"use strict";if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var aArgs=Array.prototype.slice.call(arguments,1);var fToBind=this;var NoOp=function(){};var fBound=function(){return fToBind.apply(this instanceof NoOp&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};NoOp.prototype=this.prototype;fBound.prototype=new NoOp;return fBound}}if(!Array.prototype.map){Array.prototype.map=function(callback,thisArg){if(this===void 0||this===null){throw new TypeError("this is null or not defined")}var O=Object(this);var len=O.length>>>0;var T;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}if(arguments.length>1){T=thisArg}var A=new Array(len);var k=0;while(k<len){var kValue,mappedValue;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue}k++}return A}}if(!Array.prototype.filter){Array.prototype.filter=function(callback){if(this===void 0||this===null){throw new TypeError("this is null or not defined")}var t=Object(this);var len=t.length>>>0;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}var res=[];var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){var val=t[i];if(callback.call(thisArg,val,i,t)){res.push(val)}}}return res}}var FIREFOX_SAFARI_STACK_REGEXP=/\S+\:\d+/;var CHROME_IE_STACK_REGEXP=/\s+at /;return{parse:function parse(error){if(typeof error.stacktrace!=="undefined"||typeof error["opera#sourceloc"]!=="undefined"){return this.parseOpera(error)}else if(error.stack.match(CHROME_IE_STACK_REGEXP)){return this.parseV8OrIE(error)}else if(error.stack.match(FIREFOX_SAFARI_STACK_REGEXP)){return this.parseFFOrSafari(error)}else{throw new Error("Cannot parse given Error object")}},extractLocation:function extractLocation(urlLike){var locationParts=urlLike.split(":");var lastNumber=locationParts.pop();var possibleNumber=locationParts[locationParts.length-1];if(!isNaN(parseFloat(possibleNumber))&&isFinite(possibleNumber)){var lineNumber=locationParts.pop();return[locationParts.join(":"),lineNumber,lastNumber]}else{return[locationParts.join(":"),lastNumber,undefined]}},parseV8OrIE:function parseV8OrIE(error){return error.stack.split("\n").slice(1).map(function(line){var tokens=line.replace(/^\s+/,"").split(/\s+/).slice(1);var locationParts=this.extractLocation(tokens.pop().replace(/[\(\)\s]/g,""));var functionName=!tokens[0]||tokens[0]==="Anonymous"?undefined:tokens[0];return new StackFrame(functionName,undefined,locationParts[0],locationParts[1],locationParts[2])}.bind(this))},parseFFOrSafari:function parseFFOrSafari(error){return error.stack.split("\n").filter(function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)}.bind(this)).map(function(line){var tokens=line.split("@");var locationParts=this.extractLocation(tokens.pop());var functionName=tokens.shift()||undefined;return new StackFrame(functionName,undefined,locationParts[0],locationParts[1],locationParts[2])}.bind(this))},parseOpera:function parseOpera(e){if(!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length){return this.parseOpera9(e)}else if(!e.stack){return this.parseOpera10a(e)}else if(e.stacktrace.indexOf("called from line")<0){return this.parseOpera10b(e)}else{return this.parseOpera11(e)}},parseOpera9:function parseOpera9(e){var lineRE=/Line (\d+).*script (?:in )?(\S+)/i;var lines=e.message.split("\n");var result=[];for(var i=2,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);if(match){result.push(new StackFrame(undefined,undefined,match[2],match[1]))}}return result},parseOpera10a:function parseOpera10a(e){var lineRE=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;var lines=e.stacktrace.split("\n");var result=[];for(var i=0,len=lines.length;i<len;i+=2){var match=lineRE.exec(lines[i]);if(match){result.push(new StackFrame(match[3]||undefined,undefined,match[2],match[1]))}}return result},parseOpera11:function parseOpera11(error){return error.stack.split("\n").filter(function(line){return!!line.match(FIREFOX_SAFARI_STACK_REGEXP)}.bind(this)).map(function(line){var tokens=line.split("@");var location=tokens.pop().split(":");var functionCall=tokens.shift()||"";var functionName=functionCall.replace(/<anonymous function: (\w+)>/,"$1").replace(/\([^\)]*\)/,"")||undefined;var argsRaw=functionCall.replace(/^[^\(]+\(([^\)]*)\)$/,"$1")||undefined;var args=argsRaw===undefined||argsRaw==="[arguments not available]"?undefined:argsRaw.split(",");return new StackFrame(functionName,args,location[0]+":"+location[1],location[2],location[3])})}}});(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["stackframe"],factory)}else if(typeof exports==="object"){module.exports=factory(require("stackframe"))}else{root.StackGenerator=factory(root.StackFrame)}})(this,function(StackFrame){return{backtrace:function backtrace(opts){var stack=[];var maxStackSize=10;if(typeof opts==="object"&&typeof opts.maxStackSize==="number"){maxStackSize=opts.maxStackSize}var curr=arguments.callee;while(curr&&stack.length<maxStackSize){var args=[].slice.call(curr["arguments"]);if(/function(?:\s+([\w$]+))?\s*\(/.test(curr.toString())){stack.push(new StackFrame(RegExp.$1||undefined,args))}else{stack.push(new StackFrame(undefined,args))}try{curr=curr.caller}catch(e){break}}return stack}}});var SourceMap=function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){var t;t=function(e,r){function t(e){var r=e;"string"==typeof e&&(r=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=o.getArg(r,"version"),t=o.getArg(r,"sources"),i=o.getArg(r,"names",[]),s=o.getArg(r,"sourceRoot",null),u=o.getArg(r,"sourcesContent",null),l=o.getArg(r,"mappings"),c=o.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);this._names=a.fromArray(i,!0),this._sources=a.fromArray(t,!0),this.sourceRoot=s,this.sourcesContent=u,this._mappings=l,this.file=c}var o=n(1),i=n(2),a=n(3).ArraySet,s=n(4);t.fromSourceMap=function(e){var r=Object.create(t.prototype);return r._names=a.fromArray(e._names.toArray(),!0),r._sources=a.fromArray(e._sources.toArray(),!0),r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r.__generatedMappings=e._mappings.slice().sort(o.compareByGeneratedPositions),r.__originalMappings=e._mappings.slice().sort(o.compareByOriginalPositions),r},t.prototype._version=3,Object.defineProperty(t.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?o.join(this.sourceRoot,e):e},this)}}),t.prototype.__generatedMappings=null,Object.defineProperty(t.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),t.prototype.__originalMappings=null,Object.defineProperty(t.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),t.prototype._nextCharIsMappingSeparator=function(e){var r=e.charAt(0);return";"===r||","===r},t.prototype._parseMappings=function(e){for(var r,n=1,t=0,i=0,a=0,u=0,l=0,c=e,p={};c.length>0;)if(";"===c.charAt(0))n++,c=c.slice(1),t=0;else if(","===c.charAt(0))c=c.slice(1);else{if(r={},r.generatedLine=n,s.decode(c,p),r.generatedColumn=t+p.value,t=r.generatedColumn,c=p.rest,c.length>0&&!this._nextCharIsMappingSeparator(c)){if(s.decode(c,p),r.source=this._sources.at(u+p.value),u+=p.value,c=p.rest,0===c.length||this._nextCharIsMappingSeparator(c))throw new Error("Found a source, but no line and column");if(s.decode(c,p),r.originalLine=i+p.value,i=r.originalLine,r.originalLine+=1,c=p.rest,0===c.length||this._nextCharIsMappingSeparator(c))throw new Error("Found a source and line, but no column");s.decode(c,p),r.originalColumn=a+p.value,a=r.originalColumn,c=p.rest,c.length>0&&!this._nextCharIsMappingSeparator(c)&&(s.decode(c,p),r.name=this._names.at(l+p.value),l+=p.value,c=p.rest)}this.__generatedMappings.push(r),"number"==typeof r.originalLine&&this.__originalMappings.push(r)}this.__generatedMappings.sort(o.compareByGeneratedPositions),this.__originalMappings.sort(o.compareByOriginalPositions)},t.prototype._findMapping=function(e,r,n,t,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[t]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[t]);return i.search(e,r,o)},t.prototype.originalPositionFor=function(e){var r={generatedLine:o.getArg(e,"line"),generatedColumn:o.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",o.compareByGeneratedPositions);if(n&&n.generatedLine===r.generatedLine){var t=o.getArg(n,"source",null);return null!=t&&null!=this.sourceRoot&&(t=o.join(this.sourceRoot,t)),{source:t,line:o.getArg(n,"originalLine",null),column:o.getArg(n,"originalColumn",null),name:o.getArg(n,"name",null)}}return{source:null,line:null,column:null,name:null}},t.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=o.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=o.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!r.path||"/"==r.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},t.prototype.generatedPositionFor=function(e){var r={source:o.getArg(e,"source"),originalLine:o.getArg(e,"line"),originalColumn:o.getArg(e,"column")};null!=this.sourceRoot&&(r.source=o.relative(this.sourceRoot,r.source));var n=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",o.compareByOriginalPositions);return n?{line:o.getArg(n,"generatedLine",null),column:o.getArg(n,"generatedColumn",null)}:{line:null,column:null}},t.GENERATED_ORDER=1,t.ORIGINAL_ORDER=2,t.prototype.eachMapping=function(e,r,n){var i,a=r||null,s=n||t.GENERATED_ORDER;switch(s){case t.GENERATED_ORDER:i=this._generatedMappings;break;case t.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;i.map(function(e){var r=e.source;return null!=r&&null!=u&&(r=o.join(u,r)),{source:r,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,a)},r.SourceMapConsumer=t}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))},function(e,r,n){var t;t=function(e,r){function n(e,r,n){if(r in e)return e[r];if(3===arguments.length)return n;throw new Error('"'+r+'" is a required argument.')}function t(e){var r=e.match(h);return r?{scheme:r[1],auth:r[2],host:r[3],port:r[4],path:r[5]}:null}function o(e){var r="";return e.scheme&&(r+=e.scheme+":"),r+="//",e.auth&&(r+=e.auth+"@"),e.host&&(r+=e.host),e.port&&(r+=":"+e.port),e.path&&(r+=e.path),r}function i(e){var r=e,n=t(e);if(n){if(!n.path)return e;r=n.path}for(var i,a="/"===r.charAt(0),s=r.split(/\/+/),u=0,l=s.length-1;l>=0;l--)i=s[l],"."===i?s.splice(l,1):".."===i?u++:u>0&&(""===i?(s.splice(l+1,u),u=0):(s.splice(l,2),u--));return r=s.join("/"),""===r&&(r=a?"/":"."),n?(n.path=r,o(n)):r}function a(e,r){""===e&&(e="."),""===r&&(r=".");var n=t(r),a=t(e);if(a&&(e=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),o(n);if(n||r.match(f))return r;if(a&&!a.host&&!a.path)return a.host=r,o(a);var s="/"===r.charAt(0)?r:i(e.replace(/\/+$/,"")+"/"+r);return a?(a.path=s,o(a)):s}function s(e,r){""===e&&(e="."),e=e.replace(/\/$/,"");var n=t(e);return"/"==r.charAt(0)&&n&&"/"==n.path?r.slice(1):0===r.indexOf(e+"/")?r.substr(e.length+1):r}function u(e){return"$"+e}function l(e){return e.substr(1)}function c(e,r){var n=e||"",t=r||"";return(n>t)-(t>n)}function p(e,r,n){var t;return(t=c(e.source,r.source))?t:(t=e.originalLine-r.originalLine)?t:(t=e.originalColumn-r.originalColumn,t||n?t:(t=c(e.name,r.name))?t:(t=e.generatedLine-r.generatedLine,t?t:e.generatedColumn-r.generatedColumn))}function g(e,r,n){var t;return(t=e.generatedLine-r.generatedLine)?t:(t=e.generatedColumn-r.generatedColumn,t||n?t:(t=c(e.source,r.source))?t:(t=e.originalLine-r.originalLine)?t:(t=e.originalColumn-r.originalColumn,t?t:c(e.name,r.name)))}r.getArg=n;var h=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,f=/^data:.+\,.+$/;r.urlParse=t,r.urlGenerate=o,r.normalize=i,r.join=a,r.relative=s,r.toSetString=u,r.fromSetString=l,r.compareByOriginalPositions=p,r.compareByGeneratedPositions=g}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))},function(e,r,n){var t;t=function(e,r){function n(e,r,t,o,i){var a=Math.floor((r-e)/2)+e,s=i(t,o[a],!0);return 0===s?o[a]:s>0?r-a>1?n(a,r,t,o,i):o[a]:a-e>1?n(e,a,t,o,i):0>e?null:o[e]}r.search=function(e,r,t){return r.length>0?n(-1,r.length,e,r,t):null}}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))},function(e,r,n){var t;t=function(e,r){function t(){this._array=[],this._set={}}var o=n(1);t.fromArray=function(e,r){for(var n=new t,o=0,i=e.length;i>o;o++)n.add(e[o],r);return n},t.prototype.add=function(e,r){var n=this.has(e),t=this._array.length;(!n||r)&&this._array.push(e),n||(this._set[o.toSetString(e)]=t)},t.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this._set,o.toSetString(e))},t.prototype.indexOf=function(e){if(this.has(e))return this._set[o.toSetString(e)];throw new Error('"'+e+'" is not in the set.')},t.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},t.prototype.toArray=function(){return this._array.slice()},r.ArraySet=t}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))},function(e,r,n){var t;t=function(e,r){function t(e){return 0>e?(-e<<1)+1:(e<<1)+0}function o(e){var r=1===(1&e),n=e>>1;return r?-n:n}var i=n(5),a=5,s=1<<a,u=s-1,l=s;r.encode=function(e){var r,n="",o=t(e);do r=o&u,o>>>=a,o>0&&(r|=l),n+=i.encode(r);while(o>0);return n},r.decode=function(e,r){var n,t,s=0,c=e.length,p=0,g=0;do{if(s>=c)throw new Error("Expected more digits in base 64 VLQ value.");t=i.decode(e.charAt(s++)),n=!!(t&l),t&=u,p+=t<<g,g+=a}while(n);r.value=o(p),r.rest=e.slice(s)}}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))},function(e,r,n){var t;t=function(e,r){var n={},t={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,r){n[e]=r,t[r]=e}),r.encode=function(e){if(e in t)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},r.decode=function(e){if(e in n)return n[e];throw new TypeError("Not a valid base 64 digit: "+e)}}.call(r,n,r,e),!(void 0!==t&&(e.exports=t))}]);(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["source-map"],factory)}else if(typeof exports==="object"){module.exports=factory(require("source-map/lib/source-map/source-map-consumer"))}else{root.StackTraceGPS=factory(root.SourceMap)}})(this,function(SourceMap){"use strict";function _createXMLHTTPObject(){var xmlhttp;var XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new XDomainRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var i=0;i<XMLHttpFactories.length;i++){try{xmlhttp=XMLHttpFactories[i]();_createXMLHTTPObject=XMLHttpFactories[i];return xmlhttp}catch(e){}}}function _xdr(url,callback,errback){var req=_createXMLHTTPObject();if(!req){errback(new Error("X-Domain request failed because no form of XHR is supported"))}req.open("get",url);req.onerror=errback;if(typeof XMLHttpRequest==="function"||typeof ActiveXObject==="function"){req.onreadystatechange=function onreadystatechange(){if(req.readyState===4){if(req.status>=200&&req.status<400){return callback(req.responseText)}else{errback(new Error("Unable to retrieve "+url))}}};req.send()}else{req.onload=function onload(){callback(req.responseText)};setTimeout(req.send,0)}}function _getSource(location,cache,callback,errback){if(cache[location]){callback(cache[location])}else{_xdr(location,function(source){cache[location]=source;callback(source)},errback)}}function _findFunctionName(source,lineNumber,columnNumber){var reFunctionDeclaration=/function\s+([^(]*?)\s*\(([^)]*)\)/;var reFunctionExpression=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/;var reFunctionEvaluation=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/;var lines=source.split("\n");var code="",line,maxLines=Math.min(lineNumber,20),m,commentPos;for(var i=0;i<maxLines;++i){line=lines[lineNumber-i-1];commentPos=line.indexOf("//");if(commentPos>=0){line=line.substr(0,commentPos)}if(line){code=line+code;m=reFunctionExpression.exec(code);if(m&&m[1]){return m[1]}m=reFunctionDeclaration.exec(code);if(m&&m[1]){return m[1]}m=reFunctionEvaluation.exec(code);if(m&&m[1]){return m[1]}}}return undefined}function _ensureStackFrameIsLegit(stackframe){if(typeof stackframe!=="object"){throw new TypeError("Given StackFrame is not an object")}else if(typeof stackframe.fileName!=="string"){throw new TypeError("Given file name is not a String")}else if(typeof stackframe.lineNumber!=="number"||stackframe.lineNumber%1!==0||stackframe.lineNumber<1){throw new TypeError("Given line number must be a positive integer")}else if(typeof stackframe.columnNumber!=="number"||stackframe.columnNumber%1!==0||stackframe.columnNumber<0){throw new TypeError("Given column number must be a non-negative integer")}return true}function _findSourceMappingURL(source){var m=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)$/.exec(source);if(m&&m[1]){return m[1]}else{throw new Error("sourceMappingURL not found")}}function _newLocationInfoFromSourceMap(rawSourceMap,lineNumber,columnNumber){return new SourceMap.SourceMapConsumer(rawSourceMap).originalPositionFor({line:lineNumber,column:columnNumber})}return function StackTraceGPS(opts){if(!(this instanceof StackTraceGPS)){return new StackTraceGPS(opts)}this.sourceCache={};this.findFunctionName=function findFunctionName(stackframe,callback,errback){try{_ensureStackFrameIsLegit(stackframe);_getSource(stackframe.fileName,this.sourceCache,function(source){callback(_findFunctionName(source,stackframe.lineNumber,stackframe.columnNumber))},errback)}catch(e){errback(e)}};this.getMappedLocation=function sourceMap(stackframe,callback,errback){try{_ensureStackFrameIsLegit(stackframe);_getSource(stackframe.fileName,this.sourceCache,function(source){_getSource(_findSourceMappingURL(source),this.sourceCache,function(map){var lineNumber=stackframe.lineNumber;var columnNumber=stackframe.columnNumber;callback(_newLocationInfoFromSourceMap(map,lineNumber,columnNumber))},errback)}.bind(this),errback)}catch(e){errback(e)}}}});(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["error-stack-parser","stack-generator","stacktrace-gps"],factory)}else if(typeof exports==="object"){module.exports=factory(require("error-stack-parser"),require("stack-generator"),require("stacktrace-gps"))}else{root.StackTrace=factory(root.ErrorStackParser,root.StackGenerator,root.StackTraceGPS)}})(this,function(ErrorStackParser,StackGenerator,StackTraceGPS){function _merge(first,second){var target={};var prop;[first,second].forEach(function(obj){for(prop in obj){if(obj.hasOwnProperty(prop)){target[prop]=obj[prop]}}return target});return target}function _isStrictMode(){return eval("var __temp = null"),typeof __temp==="undefined"}return function StackTrace(){this.gps=undefined;this.options={};this.get=function(opts){try{throw new Error("From StackTrace.get()")}catch(e){if(e.stack||e["opera#sourceloc"]){return this.fromError(e,_merge(this.options,opts))}else{return this.generateArtificially(_merge(this.options,opts))}}};this.fromError=function fromError(error,opts){opts=_merge(this.options,opts);var stackframes=ErrorStackParser.parse(error);if(typeof opts.filter==="function"){stackframes=stackframes.filter(opts.filter)}stackframes.map(function(sf){if(typeof this.gps!=="function"){this.gps=new StackTraceGPS}this.gps.findFunctionName(sf,function(name){sf.setFunctionName(name);return sf},function(err){return sf})}.bind(this));return stackframes};this.generateArtificially=function generateArtificially(opts){return StackGenerator.backtrace(opts)}}});
//@ sourceMappingURL=stacktrace.js.map