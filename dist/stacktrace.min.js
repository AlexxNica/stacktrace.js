!function(e,t){"use strict";"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","es6-promise","stackframe"],t):"object"==typeof exports?module.exports=t(require("source-map/lib/source-map/source-map-consumer"),require("es6-promise"),require("stackframe")):e.StackTraceGPS=t(e.SourceMap,e.ES6Promise,e.StackFrame)}(this,function(e,t){"use strict";function r(){for(var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<t.length;n++)try{return e=t[n](),r=t[n],e}catch(i){}}function n(e,t,n){var i=r();i.open("get",e),i.onerror=n,i.onreadystatechange=function(){if(4===i.readyState){if(i.status>=200&&i.status<400)return t(i.responseText);n(new Error("Unable to retrieve "+e))}},i.send()}function i(e,t,r){for(var n,i,o,a=/function\s+([^(]*?)\s*\(([^)]*)\)/,c=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,s=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,u=e.split("\n"),f="",p=Math.min(t,20),m=0;p>m;++m)if(n=u[t-m-1],o=n.indexOf("//"),o>=0&&(n=n.substr(0,o)),n){if(f=n+f,i=c.exec(f),i&&i[1])return i[1];if(i=a.exec(f),i&&i[1])return i[1];if(i=s.exec(f),i&&i[1])return i[1]}return void 0}function o(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function a(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!==0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!==0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function c(e){var t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)$/.exec(e);if(t&&t[1])return t[1];throw new Error("sourceMappingURL not found")}function s(t,r,n,i){var o=new e.SourceMapConsumer(t).originalPositionFor({line:n,column:i});return new StackFrame(o.name,r,o.source,o.line,o.column)}t.polyfill();var u=t.Promise;return function f(e){return this instanceof f?(e=e||{},this.sourceCache=e.sourceCache||{},this._get=function(t){return new u(function(r,i){this.sourceCache[t]?r(this.sourceCache[t]):e.offline?i(new Error("Cannot make network requests in offline mode")):n(t,function(e){this.sourceCache[t]=e,r(e)}.bind(this),i)}.bind(this))},this.pinpoint=function(e){return this.getMappedLocation(e).then(this.findFunctionName.bind(this))},this.findFunctionName=function(e){return new u(function(t,r){a(e),this._get(e.fileName).then(function(r){var n=i(r,e.lineNumber,e.columnNumber);t(new StackFrame(n,e.args,e.fileName,e.lineNumber,e.columnNumber))},r)}.bind(this))},void(this.getMappedLocation=function(e){return new u(function(t,r){o(),a(e),this._get(e.fileName).then(function(n){this._get(c(n)).then(function(r){var n=e.lineNumber,i=e.columnNumber;t(s(r,e.args,n,i))},r)["catch"](r)}.bind(this),r)["catch"](r)}.bind(this))})):new f(e)}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("stack-generator",["stackframe"],t):"object"==typeof exports?module.exports=t(require("stackframe")):e.StackGenerator=t(e.StackFrame)}(this,function(e){return{backtrace:function(t){var r=[],n=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(n=t.maxStackSize);for(var i=arguments.callee;i&&r.length<n;){var o=[].slice.call(i.arguments);r.push(/function(?:\s+([\w$]+))?\s*\(/.test(i.toString())?new e(RegExp.$1||void 0,o):new e(void 0,o));try{i=i.caller}catch(a){break}}return r}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],t):"object"==typeof exports?module.exports=t(require("stackframe")):e.ErrorStackParser=t(e.StackFrame)}(this,function(e){"use strict";var t=/\S+\:\d+/,r=/\s+at /;return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack&&e.stack.match(t))return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){var t=e.split(":"),r=t.pop(),n=t[t.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var i=t.pop();return[t.join(":"),i,r]}return[t.join(":"),r,void 0]},parseV8OrIE:function(t){return t.stack.split("\n").slice(1).map(function(t){var r=t.replace(/^\s+/,"").split(/\s+/).slice(1),n=this.extractLocation(r.pop().replace(/[\(\)\s]/g,"")),i=r[0]&&"Anonymous"!==r[0]?r[0]:void 0;return new e(i,void 0,n[0],n[1],n[2])},this)},parseFFOrSafari:function(r){return r.stack.split("\n").filter(function(e){return!!e.match(t)},this).map(function(t){var r=t.split("@"),n=this.extractLocation(r.pop()),i=r.shift()||void 0;return new e(i,void 0,n[0],n[1],n[2])},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),i=[],o=2,a=n.length;a>o;o+=2){var c=r.exec(n[o]);c&&i.push(new e(void 0,void 0,c[2],c[1]))}return i},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),i=[],o=0,a=n.length;a>o;o+=2){var c=r.exec(n[o]);c&&i.push(new e(c[3]||void 0,void 0,c[2],c[1]))}return i},parseOpera11:function(r){return r.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this).map(function(t){var r,n=t.split("@"),i=this.extractLocation(n.pop()),o=n.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(r=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var c=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e(a,c,i[0],i[1],i[2])},this)}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],t):"object"==typeof exports?module.exports=t(require("error-stack-parser"),require("stack-generator"),require("stacktrace-gps")):e.StackTrace=t(e.ErrorStackParser,e.StackGenerator,e.StackTraceGPS)}(this,function(e,t,r){function n(e,t){var r={};return[e,t].forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}),r}function i(e){return e.stack||e["opera#sourceloc"]}var o={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")}};return{get:function(e){try{throw new Error}catch(t){return i(t)?this.fromError(t,e):this.generateArtificially(e)}},fromError:function(t,i){return i=n(o,i),new Promise(function(n){var o=e.parse(t);"function"==typeof i.filter&&(o=o.filter(i.filter)),n(Promise.all(o.map(function(e){return new Promise(function(t){function n(r){t(e)}new r(i).pinpoint(e).then(t,n)["catch"](n)})})))}.bind(this))},generateArtificially:function(e){e=n(o,e);var r=t.backtrace(e);return"function"==typeof e.filter&&(r=r.filter(e.filter)),Promise.resolve(r)},instrument:function(e,t,r,n){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var o=function(){try{this.get().then(t,r)["catch"](r),e.apply(n||this,arguments)}catch(o){throw i(o)&&this.fromError(o).then(t,r)["catch"](r),o}}.bind(this);return o.__stacktraceOriginalFn=e,o},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e}}});
//# sourceMappingURL=stacktrace.min.js.map